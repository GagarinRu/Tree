[![Main Foodgram workflow](https://github.com/GagarinRu/Tree/actions/workflows/main.yml/badge.svg)](https://github.com/GagarinRu/Tree/actions/workflows/main.yml/)
# Django Tree Menu

**Реализация древовидного меню для Django с минимальным количеством запросов к БД**

## Техническое задание

Реализовано древовидное меню, соответствующее следующим требованиям:

1. Меню отображается через пользовательский template tag
2. Автоматически раскрываются:
   - Все родительские пункты активного элемента
   - Первый уровень вложенности под активным пунктом
3. Данные хранятся в базе данных
4. Редактирование через стандартную админку Django
5. Активный пункт определяется по URL текущей страницы
6. Поддержка нескольких независимых меню на одной странице
7. Работает с явными URL (/about/) и named URL (about)
8. На отрисовку каждого меню выполняется ровно 1 SQL-запрос

## Установка и настройка

1. Добавьте приложение в `INSTALLED_APPS`:

```python
INSTALLED_APPS = [
    ...
    'tree_menu',
]
Подключите URLs в главном файле urls.py:

python
urlpatterns = [
    ...
    path('', include('tree_menu.urls')),
]
Примените миграции:

bash
python manage.py migrate
Использование
В шаблонах
Для отображения меню используйте template tag:

html
{% load menu_tags %}
{% draw_menu 'main_menu' %}
Где main_menu - название меню, заданное в админке.

В админке
Меню редактируется через стандартный интерфейс Django Admin (/admin/):

Добавление пунктов меню:

Укажите название пункта

Выберите родительский элемент (для создания вложенности)

Задайте имя меню (для отображения через template tag)

Укажите URL (может быть абсолютным путем или named URL)

Пример структуры меню есть в db.sqlite3

Особенности реализации
Оптимизация производительности: всего 1 запрос к БД на каждое меню

Рекурсивное отображение: поддерживается любая глубина вложенности

Автоматическое определение активного пункта: по текущему URL страницы

Гибкость: несколько независимых меню на одной странице

Совместимость: работает с любым шаблоном Django

## Примеры использования
Основное меню сайта:

html
<header>
  {% draw_menu 'main_menu' %}
</header>
Боковое меню в разделе:

html
<aside>
  {% draw_menu 'products_menu' %}
</aside>
Меню в подвале:

html
<footer>
  {% draw_menu 'footer_links' %}
</footer>

### Технические детали

Python: 3.9

Django: 5.2

База данных: SQLite/PostgreSQL/MySQL (любая поддерживаемая Django)

### Автор
Evgeny Kudryashov: https://github.com/GagarinRu